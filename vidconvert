#!/usr/bin/python

import os
import subprocess

def convert(old_type, filename, used):
    new_filename = filename.replace(old_type, "mp4")
    subprocess.run(['ffmpeg', '-hide_banner', '-loglevel', 'error','-i', filename, '-codec', 'copy', new_filename])
    print(filename, " was converted to ", new_filename)

def vidconvert():
    mkv = False
    avi = False
    for filename in os.listdir(os.curdir):
        if filename.endswith('mkv'):
            convert("mkv", filename, mkv)
            mkv = True
        elif filename.endswith('avi'):
            convert("avi", filename, avi)
            avi = True
        else:
            print(filename, " ignored as type isn't supported")
            continue
    # after converting all possible files folders are created for the created files
    add_folder(mkv, 'mkv')
    add_folder(avi, 'avi')
    add_folder(True, 'mp4')
    print("We did our best chief.")


def add_folder(used, vid_type): #creates folder if the filetype given was converted
    if used:
        try:
            os.mkdir(vid_type)
            print("Directory ", vid_type, " created")
        except FileExistsError:
            print("Directory", vid_type, " already exists")


vidconvert()

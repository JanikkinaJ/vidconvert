#!/usr/bin/python

import os
import subprocess

def convert(old_type, filename, used):
    new_filename = filename.replace(old_type, "mp4")
    subprocess.run(['ffmpeg', '-hide_banner', '-loglevel', 'error','-i', filename, '-codec', 'copy', new_filename])
    print(filename, " was converted to ", new_filename)

def vidconvert():
    # folder created to store all mp4 files
    add_folder("mp4")
    mkv = False
    avi = False
    for filename in os.listdir(os.curdir):
        if filename.endswith('mkv'):
            convert("mkv", filename, mkv)
            if not mkv: 
                add_folder('avi')
            mkv = True
        elif filename.endswith('avi'):
            convert("avi", filename, avi)
            if not avi:
                add_folder('avi')
            avi = True
        else:
            print(filename, " ignored as type isn't supported")
            continue
    print("We did our best chief.")


def add_folder(vid_type): #creates folder if the filetype given was converted
    try:
        os.mkdir(vid_type)
        print("Directory ", vid_type, " created")
    except FileExistsError:
        print("Directory", vid_type, " already exists")

def move_file(filename, filetype): #moves files to a directory corresponding to their typ
    print("da")
vidconvert()
